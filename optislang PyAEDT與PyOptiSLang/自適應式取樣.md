自適應式取樣
---
我們以以下函數作為範例來介紹自適應式取樣的概念：

$$f(x_1, x_2) = \exp\left(-\frac{r^2}{2 \sigma^2}\right) \cdot \sin(k \cdot r)$$。

其中， $$r = \sqrt{(x_1 + 1)^2 + (x_2 + 2)^2}$$

$\sigma$ 和 $k$ 是調控變量，分別設定為 $\sigma = 1.2$ 和 $k = 4$。

自適應式取樣（adaptive sampling）是數值分析中的一種策略，特別適用於在特定區域變化劇烈的函數。在這些區域，更多的取樣點會集中，而在變化緩慢的區域，取樣點則會較少。這樣的取樣方式能有效提高計算效率，並降低計算資源的消耗，特別適用於多維函數及優化問題中。
該函數結合了高斯函數和正弦函數，特性是在靠近 $$(-1, -2)$$ 的區域內變化劇烈，隨著距離增大，波動變緩。這樣的行為非常適合使用自適應取樣技術，在波動劇烈的區域進行精細取樣，而在外圍的平滑區域可以減少取樣點，達到高效計算的目的。

![Figure 2024-10-02 133900](/assets/Figure%202024-10-02%20133900.png)

### AMOP建模
下圖展示了一個OptiSLang由 AMOP (Adaptive Multi-Objective Optimization Process) 組成的流程圖，其中包含一個 Python 節點，後接 Postprocessing（後處理）步驟。

這個圖為一個基於 Python 腳本的機器學習建模過程，使用自適應多目標優化技術，優化完成後將結果進行後處理。AMOP 的主要作用是對多個優化目標進行探索，並根據設定的約束條件進行改進。後處理步驟則通常用於視覺化或進一步分析優化結果。
![2024-10-02_13-51-46](/assets/2024-10-02_13-51-46.png)

### Global取樣
在開啟 AMOP 節點時，Adaption 預設為 Global 模式，這表示在模型訓練的迭代過程中，樣本點會在整個樣本空間內均勻分佈。由於這種均勻取樣的策略，無論是函數變化劇烈的區域還是變化緩慢的區域，樣本點的數量密度都差不多。這意味著在變化大的區域無法獲得足夠的樣本點來準確捕捉其複雜行為，而在變化小的區域可能浪費取樣資源。這種取樣方式適用於全局優化，但在涉及區域內高變化率的函數時，可能導致模型對於細微變化的捕捉不夠精確，進而影響最終的優化結果。在這種情況下，使用局部自適應的取樣策略可能會更有效。
![2024-10-02_13-55-17](/assets/2024-10-02_13-55-17.png)

![2024-10-02_14-00-34](/assets/2024-10-02_14-00-34.png)

在上面這個實驗中，我們使用紅色點來標示每個階段的 50 個樣本點位置，如下圖所示。從第一階段到最後階段的結果顯示，這些樣本點在整個樣本空間中分布得非常均勻。這表明取樣過程無論在不同階段，樣本點的位置都是均勻分布的，沒有集中於某個特定區域，充分涵蓋了樣本空間。這種均勻分佈有助於模型更全面地學習樣本空間的特性。
![Figure 2024-10-02 140709](/assets/Figure%202024-10-02%20140709.png)

### Local取樣

![2024-10-02_14-13-09](/assets/2024-10-02_14-13-09.png)

這張圖展示了自適應取樣的過程，從一開始取樣點較為均勻地分布在整個空間中(前50個樣本點, 0-50)，逐步集中到變化較劇烈的區域(最後50個樣本點, 250-300)。這是一個典型的自適應取樣策略，在早期均勻地探索整個區域，而隨著取樣的深入，逐漸將更多的取樣點集中到變化較大或不確定性較高的區域，以提高取樣的效率和精度。

![Figure 2024-10-02 141408](/assets/Figure%202024-10-02%20141408.png)

### 結論
在這個範例中，自適應取樣的「Local」策略在變化劇烈的區域表現出更高的預測能力（例如更高的收斂速率或COP，COP 通常是指模型性能評估的一種指標，如相關系數或預測準確度）。這說明 Local 取樣能夠更有效地捕捉數據變化密集的區域，從而提高模型的預測能力，特別是在高變化區域的精確性上。

然而，對於一般的工程建模，模型的變化通常不會像這裡展示的例子中那麼劇烈。大多數工程問題中，系統的行為通常比較穩定，變化不會集中在某些局部區域。因此，採用「Global」取樣策略能夠在整個空間中保持均衡的預測能力，不會過度集中在某些區域，從而減少模型偏漏（bias-variance trade-off）風險。

在這種情況下，Global 取樣的優勢在於它能夠適應更多不同的情境，而不會忽略全局性的行為特徵。即使在某些區域沒有劇烈變化，它也能提供相對一致的預測能力。這對於需要處理較大範圍參數空間或未預見狀況的工程問題來說特別有價值，因為它降低了局部過擬合的風險。

總結來說：
 
- **Local 取樣** ：適合高度變化或複雜度較高的區域，能在變化劇烈的區域達到更好的預測效果，但在全局穩定的區域可能效率較低。
 
- **Global 取樣** ：適合大範圍的參數空間，能提供均衡且穩定的預測效果，適合應對多數情境，不容易偏漏。

因此，對大多數工程建模問題而言，Global 取樣策略會是一個較安全和通用的選擇，因為它能在整體上平衡取樣點的分布，提供較為穩定的模型預測效果。

### 程式碼附錄
```python
# -*- coding: utf-8 -*-
"""
Created on Wed Oct  2 03:59:40 2024

@author: mlin
"""

data = '''0.1	true		Succeeded	0.4166666666666663	-3.301282051282051	0.2731867362257368
0.2	true		Succeeded	0.8012820512820518	3.75	-2.8727104801539723e-06
0.3	true		Succeeded	-4.326923076923077	0.22435897435897467	-0.0011365294556501717
0.4	true		Succeeded	0.3525641025641024	-0.7371794871794873	0.2739333542749129
0.5	true		Succeeded	2.2756410256410255	0.4807692307692313	-0.0018926337648748931
0.6	true		Succeeded	-2.66025641025641	4.07051282051282	4.3732901810026776e-08
0.7	true		Succeeded	0.608974358974359	1.891025641025641	-0.0019221510890618755
0.8	true		Succeeded	-2.980769230769231	0.5448717948717952	0.008836745316644783
0.9	true		Succeeded	2.467948717948718	1.6346153846153844	0.0001482072447956587
0.10	true		Succeeded	0.6730769230769229	-4.3910256410256405	-0.040497456741588084
0.11	true		Succeeded	-2.083333333333333	-4.7756410256410255	-0.027673926625626528
0.12	true		Succeeded	1.7628205128205132	2.6602564102564106	1.181022324605358e-05
0.13	true		Succeeded	0.7371794871794868	-0.09615384615384637	-0.0770580180225036
0.14	true		Succeeded	-3.4935897435897436	1.1217948717948723	-0.0010586974714091287
0.15	true		Succeeded	0.8653846153846156	-2.019230769230769	0.27602958953733103
0.16	true		Succeeded	1.1858974358974361	-3.814102564102564	-0.056662014429942974
0.17	true		Succeeded	3.173076923076923	-4.262820512820513	5.5322047085420717e-05
0.18	true		Succeeded	2.2115384615384617	-1.25	0.013407603186263693
0.19	true		Succeeded	2.3397435897435894	-2.7884615384615383	0.015364945486614996
0.20	true		Succeeded	-4.583333333333333	2.7243589743589745	-4.928122264713295e-06
0.21	true		Succeeded	-2.532051282051282	1.4423076923076927	0.004298373272189417
0.22	true		Succeeded	-2.852564102564102	2.467948717948718	0.00014157809160240438
0.23	true		Succeeded	2.596153846153846	-0.3525641025641024	-0.0004982237257950365
0.24	true		Succeeded	4.647435897435898	-3.173076923076923	-8.485521908250262e-06
0.25	true		Succeeded	1.826923076923077	-3.365384615384616	-0.00028760329954941066
0.26	true		Succeeded	-4.711538461538462	0.7371794871794868	-0.00024332671055409853
0.27	true		Succeeded	2.403846153846154	3.4935897435897436	3.3107350804299347e-07
0.28	true		Succeeded	4.903846153846154	3.6217948717948723	8.837743537571552e-11
0.29	true		Succeeded	3.237179487179487	3.044871794871795	2.675959967940486e-07
0.30	true		Succeeded	0.5448717948717952	-1.5064102564102566	0.08129678881911363
0.31	true		Succeeded	-1.1858974358974361	-1.3141025641025639	0.24720474594069974
0.32	true		Succeeded	-0.16025641025641024	-2.275641025641026	-0.2924841862186775
0.33	true		Succeeded	-0.9935897435897434	4.455128205128204	3.304835093855424e-07
0.34	true		Succeeded	-0.03205128205128194	1.25	0.01550211567426159
0.35	true		Succeeded	3.365384615384616	-2.916666666666666	-0.000844596809264998
0.36	true		Succeeded	2.083333333333334	-4.07051282051282	0.006257915461233984
0.37	true		Succeeded	-3.044871794871795	-3.878205128205128	-0.06836354573439851
0.38	true		Succeeded	1.891025641025641	0.8012820512820518	-0.0013830500980523918
0.39	true		Succeeded	2.6602564102564106	3.8782051282051277	3.1999366012221354e-08
0.40	true		Succeeded	-1.25	3.108974358974359	0.00011328954768504401
0.41	true		Succeeded	-4.134615384615384	-1.9551282051282053	-0.0008774569007659205
0.42	true		Succeeded	-4.967948717948718	2.083333333333334	-9.12356783711942e-06
0.43	true		Succeeded	-1.3141025641025639	-4.455128205128204	-0.054584249854760285
0.44	true		Succeeded	-2.275641025641026	-2.532051282051282	-0.3528656222775487
0.45	true		Succeeded	-1.057692307692308	-2.980769230769231	-0.5071918981521663
0.46	true		Succeeded	-0.41666666666666685	0.3525641025641024	-0.03474304462277627
0.47	true		Succeeded	0.9935897435897434	-3.044871794871795	0.07045763593539114
0.48	true		Succeeded	-2.33974358974359	-0.28846153846153855	0.12940022317533104
0.49	true		Succeeded	-1.442307692307692	-2.083333333333333	0.9076245658283536
0.50	true		Succeeded	3.814102564102564	-0.5448717948717946	0.00014641483546715096
0.51	true		Succeeded	-4.903846153846153	-3.108974358974359	-0.0016467106246168396
0.52	true		Succeeded	-3.814102564102564	1.6987179487179482	-0.00014186599130662497
0.53	true		Succeeded	4.455128205128204	-1.057692307692308	-3.6329501025473178e-06
0.54	true		Succeeded	-2.4038461538461537	3.237179487179487	1.0998982497004903e-05
0.55	true		Succeeded	-2.7243589743589745	-4.326923076923077	-0.04517649069677911
0.56	true		Succeeded	3.685897435897436	-4.839743589743589	2.2048400927576212e-06
0.57	true		Succeeded	-1.698717948717949	-0.608974358974359	-0.02438196234597761
0.58	true		Succeeded	-4.198717948717949	3.365384615384616	-1.9084032734913952e-07
0.59	true		Succeeded	-4.262820512820513	-4.134615384615384	0.0005687432457590354
0.60	true		Succeeded	4.07051282051282	-1.442307692307692	0.00011913666013897565
0.61	true		Succeeded	3.75	3.301282051282052	-4.497003854083966e-09
0.62	true		Succeeded	2.147435897435898	2.147435897435898	7.507836152687667e-05
0.63	true		Succeeded	-0.608974358974359	-3.557692307692308	0.057349458231428625
0.64	true		Succeeded	4.839743589743589	0.608974358974359	2.956241302932784e-07
0.65	true		Succeeded	-4.647435897435898	-4.583333333333333	-0.0008020500845354666
0.66	true		Succeeded	0.9294871794871795	2.2756410256410255	-4.13726579130404e-05
0.67	true		Succeeded	3.5576923076923075	-2.33974358974359	-0.00038110148684270315
0.68	true		Succeeded	0.1602564102564108	-4.198717948717949	-0.05805951317737152
0.69	true		Succeeded	-0.8653846153846156	-4.006410256410256	0.24118261328269652
0.70	true		Succeeded	-3.685897435897436	-0.16025641025641024	0.011103503407825507
0.71	true		Succeeded	2.7884615384615383	2.403846153846154	-7.722731876581666e-06
0.72	true		Succeeded	3.9423076923076925	-3.4935897435897436	9.298144863851747e-05
0.73	true		Succeeded	-4.3910256410256405	4.7756410256410255	-1.9718247791242975e-09
0.74	true		Succeeded	-4.455128205128204	-2.4038461538461537	0.01460030750159488
0.75	true		Succeeded	-4.07051282051282	1.3141025641025639	-0.0005865256934674966
0.76	true		Succeeded	0.4807692307692313	4.839743589743589	1.1443508023675727e-08
0.77	true		Succeeded	1.4423076923076927	-4.967948717948718	0.001936752836948342
0.78	true		Succeeded	-3.237179487179487	2.2115384615384617	8.332310414036056e-05
0.79	true		Succeeded	-0.5448717948717946	1.5705128205128205	0.010750374324802027
0.80	true		Succeeded	2.916666666666666	0.03205128205128194	-0.0010801169729730735
0.81	true		Succeeded	1.3141025641025639	0.1602564102564108	0.0029691410355634075
0.82	true		Succeeded	0.03205128205128194	-2.66025641025641	-0.5833049551533087
0.83	true		Succeeded	-1.5705128205128205	0.4166666666666663	-0.0571393131891534
0.84	true		Succeeded	-0.8012820512820512	2.3397435897435894	-0.00141882386178436
0.85	true		Succeeded	3.4294871794871797	4.3910256410256405	-2.33986438078246e-10
0.86	true		Succeeded	1.6987179487179482	-0.6730769230769229	-0.022144710187669028
0.87	true		Succeeded	-0.28846153846153855	-4.711538461538462	-0.06375981676393758
0.88	true		Succeeded	-3.557692307692308	-1.698717948717949	-0.07683506572005258
0.89	true		Succeeded	-4.839743589743589	-1.3782051282051282	0.0007757520907554229
0.90	true		Succeeded	-0.7371794871794873	-0.9294871794871795	-0.6258905152343138
0.91	true		Succeeded	2.852564102564102	-3.685897435897436	-0.001932359323690303
0.92	true		Succeeded	1.5064102564102566	1.5064102564102566	-0.001578809513760736
0.93	true		Succeeded	4.519230769230768	-0.22435897435897412	-7.951691949395187e-06
0.94	true		Succeeded	-1.3782051282051282	1.9551282051282048	-0.0007647921159402497
0.95	true		Succeeded	2.0192307692307687	4.519230769230768	-7.358149001899529e-09
0.96	true		Succeeded	-3.4294871794871797	-4.903846153846153	0.0036813832845251156
0.97	true		Succeeded	4.326923076923077	-3.942307692307692	-9.021165614544101e-06
0.98	true		Succeeded	2.532051282051282	-4.647435897435898	-0.0010717571774477256
0.99	true		Succeeded	-1.1217948717948718	0.9935897435897434	-0.024354450795671917
0.100	true		Succeeded	4.967948717948718	-1.891025641025641	-4.032968898189847e-06
0.101	true		Succeeded	-3.942307692307692	4.326923076923077	1.619794527360387e-08
0.102	true		Succeeded	1.25	-1.1217948717948718	-0.03090508233430482
0.103	true		Succeeded	3.8782051282051277	2.532051282051282	2.056729970565622e-07
0.104	true		Succeeded	-0.22435897435897412	4.647435897435898	1.7573109604819202e-07
0.105	true		Succeeded	-1.6346153846153844	-3.75	0.2755949297763427
0.106	true		Succeeded	3.4935897435897436	0.28846153846153855	0.0001418043072006095
0.107	true		Succeeded	-3.621794871794872	2.9807692307692313	-8.34416994724684e-06
0.108	true		Succeeded	-2.7884615384615383	0.09615384615384581	-0.07160342918553156
0.109	true		Succeeded	-2.2115384615384617	4.967948717948718	-4.478364007569928e-10
0.110	true		Succeeded	-3.365384615384616	4.583333333333334	1.205287937517573e-08
0.111	true		Succeeded	1.6346153846153844	4.006410256410256	2.9076646329109524e-07
0.112	true		Succeeded	0.28846153846153855	2.7884615384615383	0.00016328043490891115
0.113	true		Succeeded	-3.173076923076923	-0.8012820512820512	-0.056723713992139824
0.114	true		Succeeded	4.583333333333334	4.711538461538462	-1.142050793145113e-12
0.115	true		Succeeded	1.9551282051282048	-1.7628205128205128	-0.030738932875075203
0.116	true		Succeeded	-0.9294871794871795	-0.03205128205128194	0.2600925516614125
0.117	true		Succeeded	-2.916666666666666	-2.2115384615384617	0.27224932886694814
0.118	true		Succeeded	3.108974358974359	1.1858974358974361	7.794077564205051e-05
0.119	true		Succeeded	-1.7628205128205128	4.198717948717948	-1.9717790398958903e-07
0.120	true		Succeeded	-2.467948717948718	-3.237179487179487	0.2738807957656646
0.121	true		Succeeded	-1.9551282051282053	-1.5705128205128205	-0.5918320094675579
0.122	true		Succeeded	-0.6730769230769229	3.9423076923076925	-4.427131465496184e-06
0.123	true		Succeeded	-2.019230769230769	2.596153846153846	-8.332268661129853e-06
0.124	true		Succeeded	2.9807692307692313	4.903846153846154	1.1786333400078064e-10
0.125	true		Succeeded	4.3910256410256405	2.852564102564102	-7.849346704892725e-09
0.126	true		Succeeded	-0.3525641025641024	2.916666666666666	0.00016323731629432235
0.127	true		Succeeded	1.3782051282051277	3.173076923076923	-9.12348568297898e-06
0.128	true		Succeeded	4.711538461538462	2.0192307692307687	1.4652630491266788e-08
0.129	true		Succeeded	3.6217948717948723	1.7628205128205132	-4.234436449590331e-06
0.130	true		Succeeded	-1.5064102564102566	3.685897435897436	-9.100469700077744e-06
0.131	true		Succeeded	-3.878205128205128	-0.9935897435897434	-0.01433277563376351
0.132	true		Succeeded	4.262820512820513	1.3782051282051277	-1.486432679493922e-07
0.133	true		Succeeded	1.0576923076923073	1.0576923076923073	0.007357309967840247
0.134	true		Succeeded	-4.7756410256410255	3.814102564102564	2.93149099865365e-08
0.135	true		Succeeded	-1.826923076923077	-2.852564102564102	-0.6122863207577515
0.136	true		Succeeded	-0.09615384615384637	-0.41666666666666685	0.26693706091882924
0.137	true		Succeeded	3.301282051282052	-0.8653846153846156	-0.0009029619704248703
0.138	true		Succeeded	4.006410256410256	0.9294871794871795	-7.898397155951616e-06
0.139	true		Succeeded	-0.4807692307692307	-1.826923076923077	0.7342774623508502
0.140	true		Succeeded	-4.519230769230769	-0.4807692307692307	0.0022311928759864903
0.141	true		Succeeded	4.134615384615384	4.134615384615384	1.2315986462060726e-10
0.142	true		Succeeded	0.22435897435897467	0.6730769230769229	-0.03586189386036585
0.143	true		Succeeded	-1.891025641025641	1.826923076923077	-4.306870771946612e-05
0.144	true		Succeeded	1.5705128205128205	-2.467948717948718	-0.07993506123163448
0.145	true		Succeeded	-3.75	-3.4294871794871797	-0.0059877005080672336
0.146	true		Succeeded	-4.006410256410256	-3.621794871794872	0.015481214709584731
0.147	true		Succeeded	-2.596153846153846	-1.1858974358974361	0.2536201749562319
0.148	true		Succeeded	0.09615384615384581	3.4294871794871797	-3.880522448529805e-06
0.149	true		Succeeded	3.044871794871795	-1.6346153846153844	-0.001666768107923547
0.150	true		Succeeded	4.7756410256410255	-4.519230769230769	7.394495588657174e-08
0.151	true		Succeeded	-3.301282051282051	-2.7243589743589745	-0.029641178707522923
0.152	true		Succeeded	2.7243589743589745	-2.147435897435898	0.005758331964203072
0.153	true		Succeeded	1.1217948717948723	4.262820512820513	2.467778629663737e-07
0.154	true		Succeeded	-2.147435897435898	0.8653846153846156	-0.007985241742352676
0.155	true		Succeeded	4.198717948717948	-2.596153846153846	6.479889198894974e-05
0.156	true		Succeeded	-3.108974358974359	3.5576923076923075	-4.58477627693359e-06
0.157	true		Succeeded	-0.9820982098209818	-4.962496249624962	-0.03116998637315659
0.158	true		Succeeded	-2.6182618261826187	-4.972497249724973	0.015470977929997116
0.159	true		Succeeded	0.2830283028302827	-4.954495449544955	0.00851814894520693
0.160	true		Succeeded	-1.5611561156115612	-4.993499349934993	-0.014949029995859812
0.161	true		Succeeded	-3.9743974397439743	-2.7452745274527453	-0.01132690134906977
0.162	true		Succeeded	-2.19021902190219	-3.9813981398139813	0.02788295227161516
0.163	true		Succeeded	-3.3133313331333136	-4.217421742174218	0.007036224339532511
0.164	true		Succeeded	-2.9892989298929895	-1.634163416341634	0.2348509174665597
0.165	true		Succeeded	-0.16101610161016078	-1.255125512551255	-0.6297005099390488
0.166	true		Succeeded	-0.004000400040004015	-3.6593659365936593	0.2706623148009269
0.167	true		Succeeded	-0.4680468046804681	-4.997499749974997	-0.01518414485844551
0.168	true		Succeeded	-0.8400840084008399	-2.4602460246024602	0.855814930850724
0.169	true		Succeeded	-3.0913091309130913	-3.185318531853185	-0.025483763124504157
0.170	true		Succeeded	1.3801380138013797	-1.835183518351835	-0.016390741991126962
0.171	true		Succeeded	-2.165216521652165	0.28602860286028653	-0.07562035908720327
0.172	true		Succeeded	1.164116411641164	-0.47704770477047687	-0.08060130874977416
0.173	true		Succeeded	0.513051305130513	-1.0491049104910495	0.2511089708544309
0.174	true		Succeeded	-1.2821282128212819	4.136413641364136	-1.0856984626656582e-06
0.175	true		Succeeded	-1.859185918591859	3.0853085308530845	9.537931716128965e-05
0.176	true		Succeeded	-2.4362436243624366	4.706470647064707	6.006355922716487e-08
0.177	true		Succeeded	-0.6410641064106409	-2.846284628462846	-0.3804733776506288
0.178	true		Succeeded	-0.3200320032003201	-4.6894689468946895	-0.06875729046519129
0.179	true		Succeeded	-1.731173117311731	-1.5441544154415443	-0.23200758148432385
0.180	true		Succeeded	-1.154115411541154	2.9462946294629466	0.00016438933201656003
0.181	true		Succeeded	0.12801280128012849	-0.8650865086508652	0.04813275693022381
0.182	true		Succeeded	-1.9871987198719872	1.322132213221322	0.014866544339407149
0.183	true		Succeeded	-1.4101410141014104	-1.9871987198719872	0.9408636894130074
0.184	true		Succeeded	0.3850385038503845	-1.4551455145514551	-0.15005994303670256
0.185	true		Succeeded	-2.3082308230823085	0.47704770477047687	-0.06412886590623655
0.186	true		Succeeded	-0.7690769076907689	1.3801380138013797	0.015489726500618665
0.187	true		Succeeded	-2.500250025002501	-4.258425842584258	-0.07700753156483554
0.188	true		Succeeded	-1.6661666166616662	-2.128212821282128	0.3537730102187675
0.189	true		Succeeded	0.6350635063506349	-2.5552555255525555	0.20745787550050737
0.190	true		Succeeded	-1.146114611461146	-0.501050105010501	-0.11650442999866989
0.191	true		Succeeded	-2.2312231223122314	-0.872087208720872	0.14645244892207882
0.192	true		Succeeded	0.02400240024002409	0.07600760076007629	0.025632332750862657
0.193	true		Succeeded	-1.2411241124112409	-3.507350735073507	-0.07845432297409907
0.194	true		Succeeded	-2.4802480248024805	-1.9511951195119515	-0.1640296468505978
0.195	true		Succeeded	0.4650465046504648	-3.6833683368336834	0.08480297834846073
0.196	true		Succeeded	-1.7531753175317533	-4.168416841684168	0.03858021439978998
0.197	true		Succeeded	-2.7672767276727672	-2.7242724272427243	0.2753420954990145
0.198	true		Succeeded	1.105110511051105	-2.5542554255425545	0.12683883161327641
0.199	true		Succeeded	-1.5771577157715773	-0.062006200620062235	0.23515529699684934
0.200	true		Succeeded	-0.35403540354035423	-4.1054105410541055	0.10719850715420856
0.201	true		Succeeded	-2.0872087208720873	-3.4943494349434943	0.273476193025938
0.202	true		Succeeded	-0.16101610161016078	-3.1063106310631063	-0.34120653463927175
0.203	true		Succeeded	-0.5530553055305532	-0.3090309030903088	0.2261127043799103
0.204	true		Succeeded	0.37503750375037503	-2.07020702070207	-0.3626174926796017
0.205	true		Succeeded	-1.5911591159115912	-1.0091009100910093	-0.626887304632442
0.206	true		Succeeded	-0.746074607460746	-1.5121512151215122	0.72793934559402
0.207	true		Succeeded	-1.5241524152415242	-3.0883088308830886	-0.5982191155177782
0.208	true		Succeeded	0.9490949094909495	-1.5971597159715971	0.25127966176182975
0.209	true		Succeeded	0.4810481048104809	-2.945294529452945	0.2320713564349258
0.210	true		Succeeded	-1.4061406140614063	-2.599259925992599	0.20293455820488082
0.211	true		Succeeded	-0.02400240024002409	-1.784178417841784	-0.5341648464551192
0.212	true		Succeeded	-2.0862086208620862	-2.112211221122112	-0.622152613284644
0.213	true		Succeeded	-0.3740374037403743	-0.7050705070507052	-0.24650542853845267
0.214	true		Succeeded	-2.2282228222822282	-2.8882888288828883	-0.09830452029756029
0.215	true		Succeeded	-0.9440944094409442	-1.9211921192119212	0.3757237053518419
0.216	true		Succeeded	-1.9841984198419844	-1.1121112111211122	-0.4515601246356175
0.217	true		Succeeded	-0.7350735073507353	-3.236323632363236	-0.5401591464288389
0.218	true		Succeeded	-1.182118211821182	-0.8590859085908592	-0.6264836522708058
0.219	true		Succeeded	-1.7451745174517452	-3.4043404340434047	0.0315716565596306
0.220	true		Succeeded	1.0151015101510152	-2.2892289228922893	0.22733012812475958
0.221	true		Succeeded	-0.45404540454045406	-2.488248824882488	0.17455304512278427
0.222	true		Succeeded	-0.7960796079607962	-0.5020502050205022	-0.10579231444924825
0.223	true		Succeeded	-0.28902890289028926	-3.3903390339033903	-0.015810390243743526
0.224	true		Succeeded	0.33103310331033087	-2.431243124312431	-0.3212320230689023
0.225	true		Succeeded	-0.5320532053205318	-1.2081208120812081	-0.3817527492943056
0.226	true		Succeeded	-1.7971797179717974	-2.5122512251225126	-0.4423315703267785
0.227	true		Succeeded	0.19201920192019162	-3.0183018301830185	-0.0051857468292680516
0.228	true		Succeeded	-1.2721272127212724	-1.6281628162816282	0.8947007224294499
0.229	true		Succeeded	-2.301230123012301	-1.5581558155815585	-0.36740458568770085
0.230	true		Succeeded	-0.649064906490649	-2.1022102210221023	0.9490322448124133
0.231	true		Succeeded	0.20002000200019965	-1.2121212121212122	-0.25178620549328373
0.232	true		Succeeded	-0.9260926092609262	-3.4423442344234423	-0.23502277751897815
0.233	true		Succeeded	0.5240524052405238	-1.7991799179917995	-0.05893381126178968
0.234	true		Succeeded	-1.48014801480148	-0.44004400440044	0.09638354833291526
0.235	true		Succeeded	-1.115111511151115	-2.31023102310231	0.9334299232821992
0.236	true		Succeeded	-0.25802580258025787	-1.5741574157415745	-0.21462254069008327
0.237	true		Succeeded	-1.0231023102310233	-1.6091609160916094	0.948155829998158
0.238	true		Succeeded	-0.8960896089608961	-1.2401240124012403	0.06011339967637099
0.239	true		Succeeded	-1.462146214621462	-1.332133213321332	-0.08501368018014863
0.240	true		Succeeded	-1.8631863186318631	-1.9191919191919193	-0.2468744348048258
0.241	true		Succeeded	-0.7070707070707072	-1.7701770177017702	0.949843087970269
0.242	true		Succeeded	-1.131113111311131	-2.0812081208120814	0.5737518089455953
0.243	true		Succeeded	-2.5032503250325036	-2.28022802280228	-0.07363005696501797
0.244	true		Succeeded	-3.2423242324232424	-2.0062006200620064	0.07675447278603119
0.245	true		Succeeded	-1.1101110111011103	-2.5762576257625764	0.633361344749714
0.246	true		Succeeded	-0.373037303730373	-2.0512051205120514	0.5102616216060484
0.247	true		Succeeded	-1.6121612161216121	-1.746174617461746	0.4046707444683627
0.248	true		Succeeded	-3.049304930493049	-1.247124712471247	0.12191064567939258
0.249	true		Succeeded	-0.45004500450045004	-1.4771477147714773	0.08684590328035534
0.250	true		Succeeded	-2.707270727072707	-1.6511651165116514	0.2209770208919646
0.251	true		Succeeded	-1.0431043104310433	-1.03010301030103	-0.487053897129636
0.252	true		Succeeded	-1.5321532153215323	-2.3592359235923595	0.47011530609468294
0.253	true		Succeeded	-1.2561256125612563	-4.064406440644064	0.1987330341843475
0.254	true		Succeeded	-2.7772777277727774	-0.5410541054105411	0.03591928830255991
0.255	true		Succeeded	-0.8560856085608559	0.4180418041804179	-0.034082956782105746
0.256	true		Succeeded	-0.736073607360736	-4.384438443844385	-0.023098073976595544
0.257	true		Succeeded	0.3350335033503349	-0.23602360236023578	0.09955754223535729
0.258	true		Succeeded	-2.719271927192719	-3.5263526352635264	0.036154247034613334
0.259	true		Succeeded	-0.35703570357035697	-3.8143814381438146	0.27293196920364293
0.260	true		Succeeded	-0.2380238023802378	-0.10901090109010914	0.22555263908293496
0.261	true		Succeeded	-1.0361036103610362	-3.7543754375437546	0.23041816780721838
0.262	true		Succeeded	-1.9471947194719474	-0.32703270327032685	0.2733944551776248
0.263	true		Succeeded	-2.7532753275327533	-3.07030703070307	0.21602646326539873
0.264	true		Succeeded	0.8400840084008399	-3.448344834483448	0.008625217231506695
0.265	true		Succeeded	-1.2001200120012	0.12101210121012063	0.16239172184817213
0.266	true		Succeeded	-3.536353635363536	-2.392239223922392	-0.07570771006445495
0.267	true		Succeeded	-2.53025302530253	-0.7550755075507548	0.25874923601804545
0.268	true		Succeeded	-0.27802780278027794	-2.8282828282828283	-0.6247458721300114
0.269	true		Succeeded	0.07200720072007227	-2.208220822082208	-0.622174728419139
0.270	true		Succeeded	-3.4563456345634562	-1.172117211721172	-0.07854557530098268
0.271	true		Succeeded	0.9180918091809176	-0.941094109410941	0.11592121366156101
0.272	true		Succeeded	-0.2400240024002398	-2.5762576257625764	-0.4547470306605301
0.273	true		Succeeded	-2.8732873287328733	-0.9940994099409939	0.16551305511400066
0.274	true		Succeeded	0.6440644064406442	-2.2072207220722073	0.13038373229130643
0.275	true		Succeeded	1.3671367136713675	-2.8512851285128518	-0.06612689919275265
0.276	true		Succeeded	-0.8360836083608358	-2.712271227122712	0.1796911660173881
0.277	true		Succeeded	1.4861486148614866	-1.401140114011401	-0.07436629040979577
0.278	true		Succeeded	0.3580358035803577	-2.7322732273227324	-0.04875427936887727
0.279	true		Succeeded	-3.1663166316631663	-0.36203620362036226	-0.07654935928467523
0.280	true		Succeeded	0.8040804080408037	-0.5460546054605458	0.024183220295438793
0.281	true		Succeeded	0.19901990199019948	-1.8371837183718371	-0.5965662931595889
0.282	true		Succeeded	0.793079307930793	-2.7882788278827886	0.26386763402687186
0.283	true		Succeeded	-0.42804280428042796	-2.2902290229022904	0.47222923839028447
0.284	true		Succeeded	-3.3023302330233024	-1.5021502150215023	0.0003800262301589956
0.285	true		Succeeded	-1.756175617561756	-1.314131413141314	-0.563163012810352
0.286	true		Succeeded	-1.3251325132513254	-1.138113811381138	-0.3849059405462676
0.287	true		Succeeded	-1.9451945194519453	-3.1353135313531357	-0.17128667946364162
0.288	true		Succeeded	-2.198219821982198	-1.88018801880188	-0.601120034461583
0.289	true		Succeeded	-1.4371437143714372	-1.5641564156415644	0.5456791370195155
0.290	true		Succeeded	-0.37803780378037777	-0.9890989098909891	-0.612765058399622
0.291	true		Succeeded	-2.0952095209520953	-2.3592359235923595	-0.6271947893142211
0.292	true		Succeeded	-1.04010401040104	-1.4421442144214418	0.7051562728207006
0.293	true		Succeeded	-2.145214521452145	-1.324132413241324	-0.444591446302327
0.294	true		Succeeded	-1.4531453145314532	-2.846284628462846	-0.4668514757993202
0.295	true		Succeeded	-1.29012901290129	-1.784178417841784	0.9482297900960925
0.296	true		Succeeded	-0.8960896089608961	-2.1932193219321934	0.7564289149255073
0.297	true		Succeeded	-0.9070907090709068	-0.746074607460746	-0.5487708154348007
0.298	true		Succeeded	-3.003300330033003	-2.5472547254725475	0.20115018936924967
0.299	true		Succeeded	-1.91019101910191	-3.813381338133813	0.23127211470197837
0.300	true		Succeeded	-1.46014601460146	-0.7820782078207822	-0.4883850248661007'''

import matplotlib.pyplot as plt
import numpy as np

# 假設 data 是您已經有的數據
x_values = []
y_values = []
z_values = []
N=100
for n, line in enumerate(data.splitlines()):

    values = line.split()
    x, y, z = map(float, values[3:6])
    
    # 收集 x, y, z 數據
    x_values.append(x)
    y_values.append(y)
    z_values.append(z)
    

# 將數據轉換為 numpy 陣列
x_values = np.array(x_values)
y_values = np.array(y_values)
z_values = np.array(z_values)

# 創建網格數據
xi = np.linspace(min(x_values), max(x_values), 1000)
yi = np.linspace(min(y_values), max(y_values), 1000)
X, Y = np.meshgrid(xi, yi)

# 使用 scipy 的 griddata 來插值 z 值，生成等高線所需的 Z 值
from scipy.interpolate import griddata
Z = griddata((x_values, y_values), z_values, (X, Y), method='cubic', )



N = 0
step = 50
fig, axes = plt.subplots(2, 3, figsize=(12, 8))  # 創建 2x3 的子圖佈局

for i, ax in enumerate(axes.flat):  # 使用 flat 來迭代 2x3 的網格
    if N >= len(x_values):
        break
    
    ax.set_title(f'{N}-{N+step}')
    
    # 繪製等高線和填充等高線
    ax.contour(X, Y, Z, colors='black', linewidths=0.5)
    ax.contourf(X, Y, Z, cmap='viridis', alpha=0.5)
    
    # 設定相同比例尺
    ax.set_aspect('equal', adjustable='box')
    
    # 繪製樣本點
    for n, (x, y, z) in enumerate(zip(x_values, y_values, z_values)):
        if N < n < N + step:
            c = 'red'
            s = 10
        else:
            c = 'blue'
            s = 1
        ax.scatter(x, y, c=c, s=s)
    
    N += step

# 調整圖像佈局
plt.tight_layout()
plt.show()
```