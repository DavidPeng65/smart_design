HFSS GDS匯入概論
---
在當前高速、高耗電的電子設計領域，先進封裝技術的電磁特性分析變得至關重要。為了進行精準模擬分析，專業的電磁場模擬軟體，如HFSS，被廣泛應用。由於GDS文件的獨特屬性和複雜的幾何結構，匯入GDS至HFSS需要特殊的步驟和前處理技術。本文將介紹GDS匯入所需的注意事項。

### 檔案介紹
要在AEDT中成功匯入GDS檔案，通常需要三種關鍵檔案：首先是**GDS檔案**，它包含了版圖的幾何結構。其次是**技術檔案**，提供堆疊和材料資訊。最後是**層對應檔案**，這個檔案定義了GDS圖層與技術檔案物理層的對應關係，使得模擬環境能夠準確反映真實的立體結構與材料特性。

> :memo: **附註**<br>在HFSS當中, 技術檔案及層對應檔案都屬於控制檔案(control files)

#### 1. GDS檔案 (二進制格式)

GDS檔案，全名為Graphical Data System，主要用於半導體設計與微型加工工藝中來描述光罩版圖的資訊。這類文件以二進制格式儲存，設計來攜帶有關晶片布局的詳細數據，主要包括各種幾何形狀與文字註解等元素。每個元素可以透過特定的層（layer）和資料類型（Data type）來進行標記。這些ID有助於在製程中識別不同功能的區域。

然而，GDS檔案通常不包含一些對於進行電磁模擬所必需的資訊，如層疊結構（stackup）、網路（net）、材料（material）等。這些信息需通過其他的設計文件或是與設計相關的數據庫來獲得，這樣模擬軟件才能正確模擬電子元件的電磁行為。因此，GDS檔案常被用作與其他工具和流程集成的一部分，以補全整個設計與驗證流程的需要。

#### 2. 技術檔案 (文本或二進制格式)

技術檔案(Technology File)是一種非常重要的檔案，提供了關於晶片堆疊結構及材料等關鍵資訊。這些檔案通常由晶圓廠提供，並經過嚴格的驗證，以保證其在設計和模擬過程中的準確性和可靠性。

技術檔案有多種格式，每種格式根據其目標應用和軟體的需求，可能包含不同的資訊： 
1. **.ircx** ：這種格式通常包括製程工藝相關的詳細資訊，如溫度和電壓的影響。這是在考慮半導體製程中各種物理條件變化時非常實用的格式。
2. **vlc.tech** ：這是另一種格式，特別支持製程變異分析，對於預測製程偏差對最終產品性能的可能影響尤為重要。 
3. **XML** ：作為通用標記語言的一種應用，XML格式是AEDT內建技術檔格式。這種格式除了堆疊結構以及材料之外，還能夠描述包括net、port位置在內的綜合性資訊，有助於實現高精度的電磁模擬分析。

由於這些文件包含敏感和關鍵的技術資訊，一些文件可能會被加密，以保護晶圓廠的專有技術和資料不被未授權訪問或競爭對手竊取。

HFSS目前支援上述三種類型技術檔案。然而，並非所有在這些檔案中的資訊都會被利用。例如製程偏差引起的結構變化在HFSS的模擬中會被忽略，HFSS主要擷取並使用的信息是關於堆疊結構和材料特性，這些是確定結構電磁行為的關鍵因素。

#### 3. 層對應檔案 (文本格式)

在半導體設計和製造的過程中，GDS檔案和技術檔案分別扮演著不同但互補的角色。層編號（Layer ID）和資料類型（TypeID）在GDS檔案中用於標識不同的幾何形狀和設計元素，而技術檔案中的堆疊層則用於描述晶片中各種材料層的物理和化學屬性，如金屬層（metal_1, metal_2）和通孔（via_1_2）等。

有的技術檔案中就包含GDSID與堆疊層名稱的對應，這種對應信息有助於在設計軟體中自動識別和對應GDS檔案中的層。這可以大大簡化建模與材料設定流程，因為不需要手動匹配這些層，從而降低出錯的風險並提高工作效率。

如果技術檔案沒有提供這樣的GDSID與層名稱對應信息，則需要使用者在將GDS檔案導入到模擬或製程設計軟體時，手動提供一個層對應檔案(Layer Map File)。這個層對應檔案將指定哪個GDS層對應到技術檔案中的哪個物理層，確保設計的準確性和一致性。

> :memo: **附註** <br> 在進行GDS資料匯入過程中，僅有在層對應文件中特別指明的圖層才會被載入HFSS。這意味著，那些對於模擬結果無關緊要的結構層，例如dummy層，可以選擇不在層對應文件中進行標註。如此操作可以縮短資料匯入所需的時間，並且精簡模擬模型，進而提高模擬的整體效率與運作性能。

以下是HFSS支援的層對應檔案格式範例，第一個欄位是技術檔案當中物理層的名稱，第二欄是屬性，第三欄是GDS檔案的層 ID，第四欄是GDS檔案的Type ID。通過層對應檔案便可以將技術檔案與GDS連結起來，形成完整的3D立體結構。舉例來說，GDS 100/201圖層會被對應到m1層。 GDS100/210圖層則會對應到via12層。

```
m1 drawing 100 201
via12 drawing 100 210
m2 drawing 200 202
via23 drawing 200 211
m3 drawing 300 203
```

### AEDT GDS檔案匯入與模擬前處理

> :link: **範例檔下載**
[gds_import_example.zip](assets/gds_import_example.zip)

在匯入GDS檔案時，可以點選Import control file。跳出視窗，當中設定技術檔案與層對應檔案路徑，完成之後便可以產生完整結構。

![2024-04-25_05-11-07](/assets/2024-04-25_05-11-07.png)


![2024-04-25_05-10-39](/assets/2024-04-25_05-10-39.png)

如果沒有提供control檔案，匯入的結構僅包含幾何資訊，缺乏如堆疊結構和材料定義。若沒有這些信息，雖然能看到各層的幾何形狀，但無法進行更進一步的電磁分析。

進行電磁模擬前，必須進行一系列準備工作。通常情況下，GDS中的via array因其複雜性，需進行合併操作，同時調整其導電性。薄而相鄰的介電層也應該合並以簡化模型。此外，需要識別金屬互連網絡，對它們設定“solve inside”選項，並確定端口及邊界條件。

以上這些前處理步驟可以手動執行，也可以通過XML檔案自動化。XML檔案的優勢在於可以預先將所有這些設定寫入其中，一旦匯入便自動完成所有設定步驟。若使用非XML類型的控制檔，則需手動進行這些繁瑣的設定。

### 總結

本技術文件概述了在AEDT中匯入GDS檔案所需的基本條件與重要步驟。為了確保準確的電磁模擬，使用者必須提供GDSII檔案、相應的技術檔案以及層對應控制檔案。還需注意進行via array的合併、介電層的整合，以及互連金屬的網絡識別與邊界條件的設定。這些準備工作是模擬成功的基礎。如需更多細節指導或在操作過程中遇到問題，請參閱相關的進階文檔或直接聯繫ANSYS的技術支援團隊以獲得專業協助。