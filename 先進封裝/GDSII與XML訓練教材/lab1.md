Lab 1. GDSII 基本
---

> :link: **範例檔案下載**
[lab1.gds](/assets/lab1.gds)

GDSII（Graphic Data System II），是一種用於集成電路（IC）設計的文件格式，廣泛用於半導體工業的集成電路設計、製造和測試。GDSII文件包含了描述集成電路布局的所有必要信息，包括圖形、幾何形狀、層次結構以及用於製造的元素。
#### GDSII的主要特點： 
- **層次結構** ：GDSII支持層次結構設計，允許設計師將複雜的設計分解成可管理的小部分（稱為cell），這些小部分可以在設計中多次使用或引用。 
- **圖形元素** ：GDSII中包含多種基本圖形元素（如矩形、路徑、圓等），這些元素可以用來構建更複雜的圖形和結構。 
- **設計規則檢查** ：GDSII文件用於製造前的設計規則檢查（DRC），以確保布局符合特定製程的要求。 
- **製造相容性** ：GDSII格式被廣泛接受和使用於半導體製造業，是將設計從設計階段轉移到製造階段的標準介面。
#### 應用場景： 
- **集成電路設計** ：GDSII是將集成電路設計從設計工具轉移到製造廠的主要文件格式。 
- **光罩製作** ：在半導體製造過程中，GDSII文件用於生成光罩，這些光罩用於光刻過程，形成晶片上的電路圖案。 
- **設計交流和存檔** ：GDSII格式也用於在不同設計團隊或公司之間交流和存檔設計。

總而言之，GDSII是半導體設計和製造領域中一個關鍵的標準格式，它扮演著從設計到製造的橋樑角色，確保設計的精準和製造的可行性。
#### Layer 與 Data Type 介紹
在 GDSII 格式中，每個元素都有兩個重要的屬性：層（Layer）和數據類型（Datatype）。層用於表示不同的製造過程步驟或不同的功能元件，而數據類型則用於進一步細分這些層的用途。雖然 GDSII 標準定義了層和數據類型的概念，但它並沒有嚴格定義每個數據類型的具體意義，這些通常由具體的製程或設計規則來確定。

對於數據類型（Datatype），在 GDSII 文件中，它是一個整數值，理論上可以從 0 到 255。各種數據類型的含義是由製程設計規則來定義的，並且在不同的設計項目或半導體製造工藝中可能會有不同的含義。例如： 
- **0** : 可能表示標準的多邊形特徵。 
- **1-255** : 可用於表示各種特殊處理，如標記不同的蝕刻深度、不同的材料類型或特殊的處理步驟。

由於數據類型的具體含義不是由 GDSII 標準本身定義的，而是由各個半導體製造廠或設計團隊根據自己的需要來定義，因此在使用時需要參考相應的設計規則或製造規範。在某些情況下，特定的數據類型可能被用來指示布局中的某些特殊屬性，比如對齊標記、測試結構或其他用於加工或檢測的特殊元素。

#### Cell 介紹
- 在 GDSII 格式中，"cell" 是一個非常重要的概念，它代表了布局的基本單元或模塊。一個 GDSII 檔案可以包含多個 cell，每個 cell 可以包含幾何形狀、參考到其他 cell 的實例（instance）、文本標籤等元素。cell 概念如下：
    - **定義單元** ：Cell 是集成電路設計中的基本結構單元，可以想像成一個容器，它包含了組成某一部分電路或功能的所有圖形元素和實例。 
    - **模塊化** ：Cell 通過模塊化設計，允許設計者重用特定功能或結構的設計，在更大的設計中多次引用同一個 cell。


```python
import gdspy  # 導入 gdspy 函式庫

# 初始化 GDS 檔案
gds_lib = gdspy.GdsLibrary()
gds_cell = gds_lib.new_cell('MAIN')  # 創建一個新的 cell

# 創建方塊在DataType=0的層
rectangle = gdspy.Rectangle((0, 0), (10, 10), layer=100, datatype=0)
gds_cell.add(rectangle)  # 將方塊添加到 cell

# 添加標籤在DataType=20的層
label = gdspy.Label('s0', (5, 5), layer=100, texttype=20)
gds_cell.add(label)  # 將標籤添加到 cell

# 將 GDS 檔案輸出到一個檔案中
gds_lib.write_gds('d:/demo/lab1.gds')
```

### 實驗操作
#### I. KLayout檢視
在KLayout當中開啟 "lab1.gds" 文件，其中包含一個 "MAIN" 的 cell，一個矩形，和一個標籤 "Label"。在圖層面板中可以看到使用了層 100/0 和層 100/20 的區分。

![2024-04-11_20-05-58](/assets/2024-04-11_20-05-58.png)


#### II. 3D Layout匯入
下圖顯示了從 Ansys Electronics Desktop 軟件中導入 GDSII 文件的過程。具體操作步驟如下： 
1. **打開軟件** ：首先打開 Ansys Electronics Desktop。 
2. **選擇導入選項** ：在軟件的頂部選單欄中，點擊 `File` > `Import`。 
3. **選擇文件類型** ：在下拉選單中，選擇 `GDSII...` 作為導入文件的類型。 
4. **瀏覽和選擇文件** ：
    - 在彈出的文件選擇對話框中，瀏覽到包含 GDSII 文件的目錄。 
    - 選擇您要導入的 GDSII 文件，例如 `lab1.gds`。 
5. **開啟GDSII Impoer視窗** ：選中文件後，點擊 `開啟(O)` 的按鈕來開啟GDSII Import視窗。

![2024-04-11_20-12-19](/assets/2024-04-11_20-12-19.png)

#### III. GDSII Import Window
**GDSII Import Window**視窗是AEDT中用於匯入GDSII檔案的介面。這個視窗允許使用者設定在匯入過程中的各種選項。

![2024-04-11_20-21-24](/assets/2024-04-11_20-21-24.png)

左側的部分是設定各層的資訊，包括： 
- **File layer name** : 文件層的名稱，這裡是`100`。 
- **Data type** : 數據類型，可能指的是層中元素的類型，此處選擇了`signal`，可能表示這是一個信號層。 
- **Import** : 是否要匯入該層，勾選表示要匯入。 
- **Import layer name** : 匯入後的層名稱，這裡設定與文件層名稱相同。

右側是進階選項，包括： 
- **Flatten hierarchy** : 平面化層次結構，勾選後將忽略文件中層次結構的信息，將所有元素平面化。 
- **Scaling Factor** : 縮放因子，這裡設定為`1.0`，表示保持原尺寸大小。 
- **Convert via layer polygons to cirdes** : 將層上的多邊形轉換為圓形，這個選項沒有被勾選。 
- **Import Only Named Nets** : 只匯入有命名的網絡，這個選項也沒有被勾選。

下方有“Preview Stackup”和“Summary”按鈕，可以提供導入結果的預覽和摘要。而“Reset”可以恢復到預設設定，“OK”用於確認導入，“Cancel”則取消導入。