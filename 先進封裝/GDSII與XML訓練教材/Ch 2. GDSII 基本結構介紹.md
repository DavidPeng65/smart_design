GDSII 基本結構介紹
---

GDSII（Graphic Data System II），是一種用於集成電路（IC）設計的文件格式，廣泛用於半導體工業的集成電路設計、製造和測試。GDSII文件包含了描述集成電路布局的所有必要信息，包括圖形、幾何形狀、層次結構以及用於製造的元素。

### GDSII的主要特點： 
GDSII檔案格式是一種用於集成電路設計的標準格式，主要用於儲存和交換半導體設計數據。這種格式具有以下幾個主要特點：

1. **階層結構**
GDSII支持層次結構設計，這是其最核心的特點之一。它允許設計師將複雜的設計分解成較小的部分，這些部分稱為cell。每個cell可以包含完整的設計元素，並且可以在同一設計中被多次使用或引用。

2. **圖形元素**
GDSII檔案中包含了多種基本圖形元素，如矩形、路徑和圓等。這些元素是構建電子設計中的各種結構和圖形的基礎。

3. **層與資料型別**
在GDSII格式中，不同的設計元素可以被分配到不同的「圖層」上。這些圖層有助於組織和區分設計中的各種功能和結構，例如金屬連接層、絕緣層或掩模層等。此外，GDSII還支持資料型別的概念，允許更細致地控制和區分元素的特性，如線寬或曝光特點。

#### 應用場景： 
- **集成電路設計** ：GDSII是將集成電路設計從設計工具轉移到製造廠的主要文件格式。 
- **光罩製作** ：在半導體製造過程中，GDSII文件用於生成光罩，這些光罩用於光刻過程，形成晶片上的電路圖案。 
- **設計交流和存檔** ：GDSII格式也用於在不同設計團隊或公司之間交流和存檔設計。


#### Layer 與 Data Type 介紹
在 GDSII 格式中，每個元素都有兩個重要的屬性：層（Layer）和數據類型（Datatype）。層用於表示不同的製造過程步驟或不同的功能元件，而數據類型則用於進一步細分這些層的用途。==雖然 GDSII 標準定義了層和數據類型的概念，但它並沒有嚴格定義每個數據類型的具體意義，這些通常由具體的製程或設計規則來確定。==

對於數據類型（Datatype），在 GDSII 文件中，它是一個整數值，理論上可以從 0 到 255。==各種數據類型的含義是由製程設計規則來定義的，並且在不同的設計項目或半導體製造工藝中可能會有不同的含義==。例如： 
- **0** : 可能表示標準的多邊形特徵。 
- **1-255** : 可用於表示各種特殊處理，如標記不同的蝕刻深度、不同的材料類型或特殊的處理步驟。

由於數據類型的具體含義不是由 GDSII 標準本身定義的，而是由各個半導體製造廠或設計團隊根據自己的需要來定義，因此在使用時需要參考相應的設計規則或製造規範。在某些情況下，特定的數據類型可能被用來指示布局中的某些特殊屬性，比如對齊標記、測試結構或其他用於加工或檢測的特殊元素。

#### Cell 介紹
在 GDSII 格式中，"cell" 是一個非常重要的概念，它代表了布局的基本單元或模塊。一個 GDSII 檔案可以包含多個 cell，每個 cell 可以包含幾何形狀、參考到其他 cell 的實例（instance）、文本標籤等元素。cell 概念如下：
- **模塊化** ：Cell 在 GDSII 文件中的作用類似於程式設計中的一個函式或類別。每個 cell 定義了一組特定的圖形和結構，這些組合在一起來實現特定的電路功能或設計模塊。例如，一個 cell 可以是一個放大器、一個記憶體單元或一個複雜的處理器核心。在更大的設計中，這些 cell 可以被重用多次，而不需要重新定義它們每次都使用的基本結構和功能。

- **階層化** ：GDSII 文件通常具有階層結構，這意味著一個 cell 可以包含其他的子 cell。這種階層性使得複雜的電路設計變得更為可管理和可維護。例如，一個較大的 cell 可以包含多個功能塊，每個功能塊又由更小的 cell 實現，這樣層層遞進，形成了一個完整的電路系統。

### 操作流程

#### I. GDSII匯入
下圖顯示了從 Ansys Electronics Desktop 軟件中導入 GDSII 文件的過程。具體操作步驟如下： 
1. **打開軟件** ：首先打開 Ansys Electronics Desktop。 
2. **選擇導入選項** ：在軟件的頂部選單欄中，點擊 `File` > `Import`。 
3. **選擇文件類型** ：在下拉選單中，選擇 `GDSII...` 作為導入文件的類型。 
4. **瀏覽和選擇文件** ：
    - 在彈出的文件選擇對話框中，瀏覽到包含 GDSII 文件的目錄。 
    - 選擇您要導入的 GDSII 文件，例如 `example.gds`。 
5. **開啟GDSII Import視窗** ：選中文件後，點擊 `開啟(O)` 的按鈕來開啟GDSII Import視窗。

![2024-04-13_05-05-29](/assets/2024-04-13_05-05-29.png)

#### II. GDSII Import Window
**GDSII Import Window**視窗是AEDT中用於匯入GDSII檔案的介面。這個視窗允許使用者設定在匯入過程中的各種選項。

![2024-04-13_05-08-12](/assets/2024-04-13_05-08-12.png)

左側的部分是設定各層的資訊，包括： 
- **File layer name** : 文件層的名稱。 
- **Data type** : 數據類型，可能指的是層中元素的類型，此處選擇了`signal`，可能表示這是一個信號層。 
- **Import** : 是否要匯入該層，勾選表示要匯入。 
- **Import layer name** : 匯入後的層名稱，這裡設定與文件層名稱相同。

右側是進階選項，包括： 
- **Flatten hierarchy** : 平面化層次結構，勾選後將忽略文件中層次結構的信息，將所有元素平面化。 
- **Scaling Factor** : 縮放因子，這裡設定為`1.0`，表示保持原尺寸大小。 
- **Convert via layer polygons to cirdes** : 將層上的多邊形轉換為圓形，這個選項沒有被勾選。 
- **Import Only Named Nets** : 只匯入有命名的網絡，這個選項也沒有被勾選。

> **:warning: 注意事項**<br>在使用AEDT進行GDS圖檔匯入的過程中，所有具有相同Layer ID但Data Type不同的層會自動合併到同一個名稱為Layer ID值的圖層。舉例來說，Layer ID為200的所有層，不論Data Type是0還是20，都會合併到一個叫做200的圖層中。<br><br>即使某些Data Type代表的是非結構化資料，它們也會被合併到相同的圖層，這可能會在後續的處理中造成清理上的困難。為了解決這個問題，可以在匯入時使用指定的控制檔案來明確定義哪些特定層應該被導入，從而避免不必要的合併。




#### Nets 標籤頁面
在電子電路設計中，一個 "Net" 指的是一個用於傳遞信號或電源的完整金屬互連結構，通常由多段互聯的金屬線路組成，這些線路將不同的電路元件連接在一起。Nets 大致可分為信號（Signal Net）、電源（Power Net）和地線（Ground Net）等類型。在 AEDT 的電磁模擬環境中，一個明確定義的 Net 是進行準確模擬的基礎。

然而，==GDSII 格式的檔案並不直接包含 Net 資訊，這意味著無法從檔案直接識別哪些結構是相互連接的==。不過，AEDT 允許使用者利用 GDS 圖層上的文字標籤來標明特定的幾何結構屬於哪一個 Net。通過結合技術文件，我們可以追踪(Net Tracing)到所有與特定 Net 相關的幾何結構，從而建立起正確的 Net 連接。

需要注意的是，GDSII 上的Label並不一定準確地反映了 Net 的資訊。使用者必須自行進行判斷。==若 GDSII 檔案中缺乏 Net 資訊或 Net 資訊不全然正確，使用者還可以在 XML 文件中自行進行標記，這樣在導入GDS時系統便能自動將 Net 名稱關聯到相應的金屬線路上，這樣的操作可以更加自動化並減少手動設定的需求==。我們將在之後的介紹中詳細解釋這一過程。

![2024-04-11_20-21-29](/assets/2024-04-11_20-21-29.png)

在GDSII匯入視窗中切換到「Nets」標籤頁面，這允許使用者匯入特定Nets結構。在這個標籤中，使用者可以看到幾個字段： 
- **Net Name** : 用來指定網路的名稱，例如列表中已經有一個名為`s0`的網路。 
- **Layer** : 這個字段用來指示網路對應於GDSII檔案中的哪一層，對於`s0`這個網路，它是在層`100`上。 
- **Coordinate** : 這個字段用來指定網路在該層上的位置，這裡填寫的是`(Sum, 5um)`，是一個座標點。 
- **Import** : 這個復選框允許使用者選擇是否要匯入這個特定的網路。 
- **Power/Gnd** : 這裡的復選框允許使用者標記網路是電源（Power）還是接地（Ground）。



#### III. 完成匯入
完成匯入之後，在畫面中間顯示的是GDSII設計圖面。

在上方的菜單欄View中，使用者可以開啟如「Layers」、「Cells」、「Nets」等視窗，這些視窗包含GDSII相關訊息。

![2024-04-13_05-00-49](/assets/2024-04-13_05-00-49.png)

注意到這時候設計為3D Layout IC模式，設計圖標上有一小IC字樣

![2024-04-13_05-33-38](/assets/2024-04-13_05-33-38.png)

工具列上面也出現了IC mode專有的工具：

![2024-04-13_05-36-37](/assets/2024-04-13_05-36-37.png)




截至目前為止，我們只匯入了單一的GDSII檔案，這份檔案還缺乏許多進行電磁模擬所需的關鍵細節。具體而言，由於缺少材料屬性、結構堆疊、Net和端口（Port）等關鍵資料，目前的檔案尚不能直接應用於電磁模擬。為解決這一問題，我們透過引入一個XML格式的控制文件，其中將包括所有必要的補充資訊。當這個控制文件與GDSII檔案一同匯入時，將能夠提供進行準確電磁模擬所需的完整數據。








