ANSYS軟體授權機制
---
 在現代工程模擬軟體的使用中，授權管理是確保軟體合法性和資源有效分配的關鍵環節。ANSYS 作為領先的工程模擬軟體，依賴強大的授權管理系統來管理其各種高級功能模組的使用權限。在這個過程中，lmgrd 和 ansyslmd 等守護程序扮演著至關重要的角色。理解從啟動授權伺服器到 ANSYS 軟體順利運行的完整流程，不僅有助於系統管理員進行有效的資源分配和監控，也為技術支持和故障排除提供了必要的基礎。本文將詳細闡述這一過程中的每一個步驟，從啟動授權伺服器到授權分配，再到 ANSYS 軟體的最終啟動，確保讀者對授權管理流程有全面的了解。

### 授權運作流程

1. **啟動授權伺服器（License Server）** ： 
  - 授權伺服器由 `lmgrd` 和相關的供應商守護程序（如 `ansyslmd`）組成。
 
  - 系統管理員需要先啟動授權伺服器。通常這是通過運行 `lmgrd` 可執行文件來實現的。
 
2. **啟動 `lmgrd`** ： 
  - `lmgrd` 是 FlexNet Publisher 授權管理系統的核心守護程序，它負責管理整個授權流程。
 
  - 在啟動時，`lmgrd` 會讀取與其關聯的 `.LIC` 授權文件，檢查文件的合法性和完整性。這包括解析文件中的授權特徵、有效期等信息，以及驗證文件的數位簽名。
 
3. **檢查 `.LIC` 文件的有效性** ： 
  - `lmgrd` 會根據 `.LIC` 文件中的授權信息進行檢查，確認授權文件是否有效且未被篡改。
 
  - 通過檢查後，`lmgrd` 將啟動與 ANSYS 軟體相關的供應商守護程序 `ansyslmd`。
 
4. **啟動 `ansyslmd`** ： 
  - 在 `.LIC` 文件通過驗證後，`lmgrd` 會啟動 `ansyslmd`，這是專門為 ANSYS 軟體設計的守護程序。
 
  - `ansyslmd` 負責管理 ANSYS 軟體的授權，包括分配和監控授權使用狀況。
 
5. **啟動 ANSYS 軟體** ： 
  - 當用戶啟動 ANSYS 軟體時，軟體會首先向授權伺服器發出授權請求。這個請求會通過網絡傳輸到 `lmgrd`。
 
6. **`lmgrd` 接收到授權請求** ： 
  - `lmgrd` 接收到來自 ANSYS 軟體的授權請求後，將根據請求中所指定的授權特徵和數量進行處理。
 
  - 接著，`lmgrd` 會將此請求轉發給 `ansyslmd`，由 `ansyslmd` 進一步處理。
 
7. **`lmgrd` 參考 `ansyslmd.opt` 文件** ： 
  - 在處理授權請求時，`ansyslmd` 會參考 `ansyslmd.opt` 文件中的配置。該文件定義了授權使用的策略，包括哪些用戶或用戶組可以使用特定的授權、授權的最大並行數量等規則。
 
  - `ansyslmd` 根據這些規則來決定是否批准授權請求。
 
8. **授權分配與批准** ： 
  - 如果請求符合 `ansyslmd.opt` 文件中的規則且有可用授權，`ansyslmd` 會分配授權並通知 `lmgrd`。
 
  - `lmgrd` 會將授權批准信息回傳給 ANSYS 軟體，允許其繼續啟動。
 
9. **軟體啟動** ：
  - 一旦授權被分配並批准，ANSYS 軟體將收到授權確認信息，並繼續進行啟動過程。

  - 軟體隨後會加載所需模組，進入正常運行狀態，允許用戶進行模擬和分析工作。