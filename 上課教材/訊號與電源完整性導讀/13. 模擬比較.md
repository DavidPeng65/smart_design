DDR SI、SerDes SI 和 PI 這三種分析在模擬手法、模型、拓撲、指標和工具上的異同
---

**Podcast 主持人 (Lisa):** 歡迎再次收聽「訊號完整性入門」！今天我們依然非常榮幸邀請到業界知名的林技術顧問。林顧問，您好！

**技術顧問 (林顧問):** Lisa 妳好，各位聽眾朋友們，大家好！很高興又和大家一起深入探討電子設計中的仿真分析技術。

**Lisa:** 林顧問，在我們之前的節目中，我們已經分別深入了解了 DDR 接口的訊號完整性 (SI) 分析、高速 SerDes 鏈路的 SI 分析，以及電源完整性 (PI) 分析。它們各自都有其獨特的挑戰和解決方案。今天，我想請您和我們一起，對這三種重要的分析領域——**DDR SI、SerDes SI 和 PI——在模擬分析的手法、所使用的模型、典型的通道拓撲、關注重點的分析指標以及常用的 EDA 工具等方面，進行一次橫向的比較。** 這樣可以幫助我們更清晰地理解它們之間的相同之處與核心差異。

**林顧問:** Lisa，這個主題非常好，做一次橫向比較能讓我們對這些看似獨立卻又相互關聯的分析領域有一個更系統的認識。雖然它們都服務於確保電子系統高性能和高可靠性的最終目標，但在具體的分析實踐中，確實存在顯著的異同。

**Lisa:** 那我們先從**核心目標和關注點**上來看，這三者有什麼不同呢？

**林顧問:**
    *   **DDR SI：** 核心目標是確保在記憶體控制器和 DRAM 顆粒之間，大量的並行數據 (DQ)、地址/命令 (CA) 和選通訊號 (DQS) 能夠在嚴格的時序窗口內被準確傳輸和採樣。**關注點主要在於時序裕量 (Setup/Hold Time Margin)、眼圖張開度、串擾 (Crosstalk) 對時序和電壓的影響、以及同步開關噪聲 (SSN) 對訊號質量的影響。**
    *   **SerDes SI：** 核心目標是確保在極高的比特率下，通過差分串行鏈路傳輸的數據能夠克服嚴重的通道損耗和符號間干擾 (ISI)，並在接收端以極低的誤碼率 (BER) 被恢復。**關注點主要在於通道的插入損耗 (IL) 和回波損耗 (RL)、眼圖張開度（尤其是考慮了等化之後的眼圖）、抖動 (Jitter) 的各個分量、以及誤碼率 (BER) 的預估。**
    *   **PI (電源完整性)：** 核心目標是確保為晶片和系統提供穩定、乾淨的供電電壓，即電源分配網絡 (PDN) 的阻抗在目標頻寬內足夠低，以抑制由於晶片瞬態電流變化引起的電源噪聲。**關注點主要在於 PDN 的阻抗曲線 (Z-profile) 是否滿足目標阻抗、直流壓降 (IR Drop)、電源平面上的諧振、以及去耦電容的優化。**

**Lisa:** 目標和關注點確實各有側重。那麼在**所使用的模型類型**上，這三者又有何異同？

**林顧問:**
    *   **共同點：**
        *   **IBIS 模型：** 對於 DDR SI 和 SerDes SI，描述晶片 I/O 緩衝器行為的 IBIS 模型都是基礎。PI 分析中，雖然不直接用 IBIS 描述 PDN，但晶片的電流消耗模型（有時也基於 IBIS Power-Aware 或其他格式）是進行瞬態 PI 仿真的輸入。
        *   **S 參數模型：** 對於 DDR SI 和 SerDes SI，描述 PCB 走線、過孔、連接器、封裝等無源通道的 S 參數模型都是核心。PI 分析中，描述 PDN（電源/地平面、去耦電容、封裝電源網絡）的 S 參數或等效的 RLGC 網絡模型也是關鍵。

    *   **差異點：**
        *   **DDR SI：** 主要使用標準的 IBIS 模型 (V/I, V/T 表格)。對於 ODT 等行為，IBIS 也有相應的描述。
        *   **SerDes SI：** 由於 SerDes 通常包含複雜的等化器 (如 Tx De-emphasis, Rx CTLE, DFE) 和 CDR，標準 IBIS 模型描述能力不足，因此**廣泛使用 IBIS-AMI (Algorithmic Modeling Interface) 模型**，它結合了 IBIS 的類比前端描述和可執行的演算法模型庫 (.dll/.so) 來模擬這些高級訊號調理功能。
        *   **PI：** 除了 PDN 的 S 參數或 RLGC 模型外，還需要**去耦電容的精確模型**（包括其 ESL, ESR），以及描述晶片瞬態電流消耗的**電流波形模型 (Current Profile)** 或**行為級功耗模型**。

**Lisa:** 模型的使用上，SerDes SI 的 IBIS-AMI 是個顯著的特點。接下來看**通道拓撲和建模範圍**，這三者有何不同？

**林顧問:**
    *   **DDR SI：** 通道拓撲通常是**點對多點 (Point-to-Multipoint)** 或**多點傳輸 (Fly-by)** 的並行匯流排結構。建模範圍需要覆蓋從 DDR 控制器管腳，經過 PCB 走線、可能的 DIMM 連接器，到所有相關 DRAM 顆粒管腳的完整路徑。由於是並行匯流排，需要同時考慮大量訊號線之間的耦合（串擾）。電磁模擬時，通常會對整個 DQ 組、CA 組等進行整體提取。
    *   **SerDes SI：** 通道拓撲主要是**點對點 (Point-to-Point)** 的差分串行鏈路。建模範圍是從 SerDes Tx 管腳，經過 PCB 走線、過孔、連接器、可能的電纜，到 SerDes Rx 管腳。雖然是串行，但高速下也需要考慮差分對內部以及相鄰差分對之間的耦合。電磁模擬通常針對單個或少數幾個差分對進行精細提取。
    *   **PI：** 通道拓撲是**複雜的電源分配網絡 (PDN)**，包括從 VRM (Voltage Regulator Module) 輸出，經過 PCB 的電源層和地層平面、大量的去耦電容、封裝的電源/地網絡，最終到達晶片的供電引腳。建模範圍非常廣，從板級到封裝級甚至片上 PDN 都可能需要考慮。電磁模擬需要對大面積的平面結構和眾多離散元件進行建模。

**Lisa:** 拓撲差異很明顯，DDR 是並行「大軍」，SerDes 是高速「精兵」，PI 則是複雜的「能源供應網」。那麼在**核心的分析指標和判斷標準**上呢？

**林顧問:**
    *   **DDR SI：**
        *   **時序參數：** 數據訊號 (DQ) 相對於選通訊號 (DQS) 的建立時間 (tIS) 和保持時間 (tIH) 裕量。
        *   **眼圖：** DQ 訊號在 DQS 邊緣處的眼高和眼寬。
        *   **電壓裕量：** 訊號擺幅是否滿足 Vih/Vil 要求。
        *   **串擾引起的時序偏移和電壓噪聲。**
    *   **SerDes SI：**
        *   **眼圖：** 經過等化器處理後，在接收端判決器前的眼高、眼寬、抖動（DJ, RJ, TJ）。
        *   **誤碼率 (BER)：** 通常要求非常低，如 10<sup>-12</sup> ~ 10<sup>-15</sup>，通過統計分析或長時間 bit-by-bit 仿真預估。
        *   **通道特性：** 插入損耗 (IL)、回波損耗 (RL)、插入損耗偏差 (ILD)、通道操作裕量 (COM) 等頻域指標。
    *   **PI：**
        *   **PDN 阻抗 (Impedance Profile)：** 在目標頻寬內，PDN 阻抗是否低於預設的目標阻抗 (Z_target)。
        *   **電源噪聲 (Voltage Ripple/Noise)：** 時域仿真得到的電源電壓波動幅度是否在允許範圍內。
        *   **直流壓降 (DC Drop)：** 大電流路徑上的電壓損失。
        *   **諧振頻率和幅度：** PDN 上是否存在有害的諧振峰。

**Lisa:** 分析指標也各有側重，DDR 重時序，SerDes 重眼圖和 BER，PI 重阻抗和噪聲。最後，在**常用的 EDA 工具和仿真模式**上，這三者有何異同？

**林顧問:**
    *   **共同點：**
        *   **電磁場仿真工具：** Ansys HFSS/SIwave, CST Studio Suite, Keysight EMPro, Siemens HyperLynx Full-Wave Solver 等，用於提取 S 參數或 PDN 模型。
        *   **電路/通道仿真工具：** Keysight ADS, Cadence Sigrity SystemSI/PowerSI, Siemens HyperLynx SI/PI, Ansys Circuit/SIwave 等，用於進行協同仿真。

    *   **差異點（仿真模式和側重）：**
        *   **DDR SI：** 主要進行**時域瞬態協同仿真 (Bit-by-Bit)**，需要同時仿真大量並行訊號以考慮串擾。一些工具也提供針對 DDR 的專用分析流程和時序報告。
        *   **SerDes SI：**
            *   **時域瞬態協同仿真 (Bit-by-Bit with AMI)：** 用於觀察波形、調試等化器行為，但由於數據量大，通常只仿真有限數量的比特。
            *   **統計模式/快速眼圖分析 (Statistical/Fast Eye with AMI)：** 基於脈衝響應和統計方法，快速預估極低 BER 下的眼圖和相關指標，是 SerDes 分析的主流高效方法。
        *   **PI：**
            *   **頻域阻抗分析：** 計算 PDN 的 S 參數或 Z 參數，繪製阻抗曲線，進行去耦優化。
            *   **直流分析：** 計算 IR Drop 和電流密度。
            *   **時域瞬態協同仿真：** 結合晶片電流消耗模型和 PDN 模型，仿真電源噪聲。

**Lisa:** 太清晰了！通過這樣的橫向比較，DDR SI、SerDes SI 和 PI 在模型、拓撲、指標和工具使用上的異同點一目了然。雖然它們都服務於系統的穩定可靠運行，但由於各自面對的物理現象和設計目標不同，其分析方法論也演化出了各自的特點。

**林顧問:** 的確如此。理解這些異同，有助於工程師在面對具體設計挑戰時，能夠選擇正確的分析思路、合適的模型和高效的工具。例如，不能簡單地將 SerDes 的統計分析方法直接套用到 DDR 的並行時序分析上，反之亦然。同時，也要認識到它們之間的關聯，比如 PI 問題會直接影響 SI 的結果。

**Lisa:** 非常感謝林顧問今天為我們帶來了如此精彩的比較分析！這對於我們系統性地理解訊號完整性和電源完整性這兩大領域的仿真實踐，提供了極具價值的框架和洞察。

**林顧問:** 不客氣，Lisa。希望這樣的比較能幫助聽眾朋友們在腦海中建立一個更清晰的知識地圖。

**Lisa:** 今天的「訊號完整性入門」就到這裡，再次感謝林顧問的精彩分享，也感謝各位聽眾的收聽，我們下期再見！

