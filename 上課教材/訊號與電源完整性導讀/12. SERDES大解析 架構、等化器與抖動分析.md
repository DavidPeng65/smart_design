SERDES大解析 架構、等化器與抖動分析
---

**Podcast 主持人 (Lisa):** 歡迎再次收聽「訊號完整性入門」！我是主持人 Lisa。在前幾集的節目中，我們已經對訊號完整性的基礎、常見訊號類型以及分析工具的發展有了初步的認識。今天，我們要深入探討一個在現代高速通訊中無所不在的關鍵技術——SERDES。林顧問，您好！

**技術顧問 (林顧問):** Lisa 妳好，各位聽眾朋友們，大家好！SERDES 的確是撐起今日高速數位世界的樑柱之一，很高興能和大家詳細聊聊。

**Lisa:** 林顧問，我們之前提到 SERDES 是 Serializer/Deserializer 的縮寫，它將並列資料轉換成高速串列資料傳輸。能否先請您介紹一下，在我們的電腦或網路設備中，有哪些常見的介面是採用 SERDES 技術的呢？

**林顧問:** SERDES 技術的應用非常廣泛。一些**常見的採用 SERDES 的規格**包括：
*   **PCI Express (PCIe):** 用於連接顯示卡、NVMe SSD 等高速周邊。
*   **SATA (Serial ATA) / SAS (Serial Attached SCSI):** 用於連接硬碟和固態硬碟。
*   **USB (Universal Serial Bus):** 從 USB 3.0 開始，也採用了 SERDES 技術。
*   **Ethernet (乙太網路):** 從 Gigabit Ethernet (1GbE) 到現在的 100GbE、400GbE 甚至更高速的乙太網路，其物理層都依賴 SERDES。
*   **HDMI / DisplayPort:** 高解析度影像傳輸也大量使用 SERDES。
*   還有許多晶片間的互連 (chip-to-chip) 或背板 (backplane) 通訊，也常採用專有或標準的 SERDES 解決方案。

**Lisa:** 哇，幾乎涵蓋了所有我們熟悉的高速介面！這些不同的 SERDES 規格，它們在「速度」和「訊號表示」上有什麼特點嗎？

**林顧問:** 很好的問題。不同的 SERDES 規格，其**位元速率 (Bit Rate)** 和**訊號準位 (Signal Level 或 Modulation Level)** 可能不同。
*   **位元速率**指的是每秒傳輸的位元數量，例如 PCIe Gen3 是 8 Gbps (Giga-bits per second)，PCIe Gen5 則高達 32 Gbps。
*   傳統上，很多 SERDES 採用的是 **NRZ (Non-Return-to-Zero)** 編碼，也就是用兩種電壓準位（例如高電壓代表'1'，低電壓代表'0'）來表示一個位元。但隨著速率的極限，為了在相同的通道頻寬下傳輸更多數據，**PAM4 (Pulse Amplitude Modulation with 4 levels)** 編碼開始被廣泛應用，例如在 50GbE 以上的乙太網路和 PCIe Gen6。PAM4 用四種不同的電壓準位來表示兩個位元 (00, 01, 10, 11)，這樣在相同的符號率 (symbol rate) 下，位元速率可以翻倍，但代價是訊號的垂直眼高變小，對雜訊更敏感。

**Lisa:** 提到編碼，SERDES 在資料傳輸前是不是還會做一些特殊的**編碼 (Encoding)**，接收端再做**解碼 (Decoding)** 呢？

**林顧問:** 是的，這是確保資料可靠傳輸和時脈恢復的重要手段。常見的編碼方式例如 **8b/10b 編碼** (早期 PCIe, SATA, USB 3.0 等使用) 或 **128b/130b (或 64b/66b) 編碼** (較新的 PCIe, 高速乙太網路等使用)。這些編碼的目的包括：
1.  **直流平衡 (DC Balance):** 確保長時間內'0'和'1'的數量大致相等，避免訊號產生直流漂移。
2.  **足夠的轉換密度 (Transition Density):** 確保資料流中有足夠的電壓轉換邊緣，這樣接收端的 CDR 電路才能有效地從資料中恢復時脈。
3.  **錯誤檢測/校正的輔助：** 有些編碼本身也帶有一些錯誤檢測能力。

**Lisa:** SERDES 訊號通常都是以「差分對 (Differential Pair)」的形式傳輸，這是為什麼呢？

**林顧問:** **差分對**是 SERDES 的標配。它使用兩條訊號線來傳輸一個訊號，一條傳送正相訊號 (D+)，另一條傳送反相訊號 (D-)。這樣做的好處是：
1.  **抗共模雜訊能力強：** 外界引入的雜訊通常會同時影響 D+ 和 D-，但在接收端做差分運算時，這些共模雜訊會被抵消掉。
2.  **減少電磁干擾 (EMI) 輻射：** 由於兩條線上的電流方向相反，它們產生的電磁場會在遠處相互抵消一部分，從而減少對外輻射。
3.  **可以提供更清晰的訊號翻轉點：** 差分訊號的交叉點可以用來更精確地判斷時序。

**Lisa:** 由於訊號速率非常高，通道損耗會很嚴重。SERDES 是如何克服這個問題的呢？這就要提到「等化器 (Equalizer)」了吧？

**林顧問:** 完全正確！**等化器**是 SERDES 系統中不可或缺的部分，用來補償通道對高頻訊號的衰減。常見的等化器技術有：
1.  **發送端等化 (Transmitter Equalization, Tx EQ):**
    *   **預加重 (Pre-emphasis):** 增強訊號中高頻成分的幅度。
    *   **去加重 (De-emphasis):** 降低訊號中低頻成分的幅度，相對地也就突出了高頻。
    *   **FFE (Feed-Forward Equalizer):** 更複雜的發送端等化器，透過多個"tap"（延遲單元和加權器）來對訊號波形進行預先的整形。
2.  **接收端等化 (Receiver Equalization, Rx EQ):**
    *   **CTLE (Continuous Time Linear Equalizer):** 一種類比濾波器，作用像是一個高通濾波器，提升高頻訊號，衰減低頻訊號。
    *   **DFE (Decision Feedback Equalizer):** 一種非線性等化器，它根據先前判讀的位元結果，來消除當前位元受到的符碼間干擾 (ISI)。

**Lisa:** 這些等化器聽起來非常複雜。在分析帶有差分對和等化器的 SERDES 通道時，S參數是不是也要有特殊的處理方式？

**林顧問:** 是的。對於差分通道，我們通常使用**混合模式S參數 (Mixed-Mode S-parameters)** 來描述其特性。混合模式S參數可以將一個四端口的差分通道（兩個輸入端口，兩個輸出端口）的特性分解為：
*   **差模到差模 (SDDxx):** 例如 SDD21 代表差模訊號的插入損耗。
*   **共模到共模 (SCCxx):**
*   **差模到共模 (SCDxx):** 反映了差模訊號轉換為共模雜訊的程度，與通道的對稱性有關。
*   **共模到差模 (SDCxx):**
這對於分析差分訊號的完整性以及模式轉換非常重要。

**Lisa:** 我們之前提到，像等化器和 CDR 這樣的複雜電路，其行為很難用傳統模型描述，所以引入了 AMI 模型。

**林顧問:** 沒錯。**AMI (Algorithmic Modeling Interface)** 模型允許晶片廠商提供其 SERDES 收發器中**等化器 (Equalizers)** 和 **CDR (Clock and Data Recovery)** 電路的行為級演算法模型。這使得系統設計者可以在通道模擬中準確地評估這些先進功能的影響，而無需知道其內部實現細節。

**Lisa:** 提到 CDR，它的主要功能是從資料中恢復時脈。那「抖動 (Jitter)」分析在 SERDES 中就非常關鍵了吧？

**林顧問:** **抖動分析 (Jitter Analysis)** 是 SERDES 訊號完整性驗證的核心。抖動指的是訊號邊緣在時間上的不確定性或晃動。它會直接影響 CDR 的性能和系統的誤碼率。抖動可以分為隨機抖動 (Random Jitter, RJ) 和確定性抖動 (Deterministic Jitter, DJ)。DJ 又可以進一步細分為週期性抖動 (Periodic Jitter, PJ)、資料相關性抖動 (Data-Dependent Jitter, DDJ，主要來自ISI) 等。分析抖動的來源、大小、頻譜特性，並預測其對系統的影響，是 SERDES 設計的重中之重。

**Lisa:** 這些分析最終的目的是確保接收端能正確判讀資料。我們常聽到的「眼圖 (Eye Diagram)」和「浴缸曲線 (Bathtub Curve)」是不是就是評估 SERDES 鏈路品質的重要指標？

**林顧問:** 正是如此！
*   **眼圖 (Eye Diagram):** 是將接收到的無數個位元的波形疊加在一起形成的圖形。眼圖的「眼睛」張開得越大越清晰，代表訊號品質越好，誤碼率越低。我們會關注眼高 (Eye Height)、眼寬 (Eye Width) 等參數。
*   **浴缸曲線 (Bathtub Curve):** 橫軸是取樣時間點相對於眼圖中心的位置，縱軸是誤碼率 (BER)。它顯示了在不同取樣時間點，系統能夠達到的誤碼率水平。曲線的底部越寬越平坦，代表系統的時序容限越好。

**Lisa:** 從常見規格、速率與編碼、差分對、各種等化器技術，到混合模式S參數、AMI模型、CDR、關鍵的抖動分析，最後到眼圖和浴缸曲線的評估，今天我們對 SERDES 技術有了一個非常全面和深入的了解！它真的是一門集大成的技術。

**林顧問:** 的確，SERDES 的設計與驗證涉及了電路、電磁、通訊理論、統計等多個領域的知識，是訊號完整性領域最具挑戰也最迷人的部分之一。

**Lisa:** 非常感謝林顧問今天為我們帶來如此詳盡的 SERDES 技術剖析。今天的「訊號完整性入門」就到這裡，我們下次再見！

**技術顧問 (林顧問):** 謝謝Lisa，也謝謝各位聽眾！下次見！