第1章 緒論
---

ANSYS EDB 檔案格式（Electronics Database File）是 ANSYS 電子設計自動化（EDA）工具中用來儲存印刷電路板（PCB）和封裝設計資料的專有格式，主要在 ANSYS HFSS 3D Layout 和 ANSYS SIwave 等工具中使用。

### 1.1 EDB 檔案
#### 儲存資訊 
1. **材料（Materials）** 
存儲有關用於製造電路板的各種材料的資訊，例如導電材料、絕緣材料等，這些特性對於分析電路板的電氣特性至關重要。

2. **堆疊結構（Stackup）** 
描述PCB的層疊結構，包括各層的材料、厚度和其他物理特性。這對於理解電路板的整體設計和性能非常重要。

3. **網絡（Nets）** 
表示電路板上的電氣連接。一個網絡包括連接一組電子元件的導體，這些元件共享電氣特性。

4. **層（Layers）**
PCB中的各個層次，每一層可以包含信號層、地層或電源層等不同的功能層。
5. **墊片（Padstacks）** 
描述孔的結構，這些孔用於放置連接元件引腳的通孔或埋孔。每個墊片可以包含有關孔徑、形狀、用於連接的層等信息。

6. **引腳（Pins）** 
元件引腳的資料，通常是與特定的墊片相關聯，用於建立元件與PCB上其他元件或網絡的物理和電氣連接。

7. **元件（Components）** 
涉及的所有電子元件資訊，如晶片、電阻、電容等，包括它們的規格、位置和方向。

8. **激勵（Excitations）** 
用於模擬中的電源激勵設置，指定哪些信號或功率將進入電路系統，用於性能分析。

9. **端口（Ports**） 
用於模擬的界面，允許模擬中的信號進出，這些通常用於高頻信號傳輸特性分析。

10. **探針（Probes）** 
用於測量和分析電路中特定點的電氣特性的虛擬設備。

11. **設定（Setups）** 
包含模擬設定，如頻率範圍、解析度和其他參數，這些設定確定了模擬執行的具體條件。

#### EDB 檔案的用途 
 
- **電磁模擬** ：在 ANSYS HFSS 3D Layout 中，EDB 檔案可用來執行 3D 電磁場模擬，特別適合於高頻電路的模擬與優化。
 
- **訊號與電源完整性分析** ：在 ANSYS SIwave 中，EDB 檔案用於進行訊號完整性（Signal Integrity, SI）和電源完整性（Power Integrity, PI）的分析，這在高速 PCB 設計中尤為重要。
 
- **熱模擬** ：EDB 檔案也能與 ANSYS Icepak 結合，進行熱分析，尤其是電路板上高發熱區域的熱管理設計。



#### aedb目錄的組成

從圖片中可以看到，.aedb目錄包括以下兩個主要文件或文件夾： 
1. **stride 文件夾**  - 這個文件夾包含與特定設計的步進數據或版本有關的信息。通常這樣的文件夾會用於組織和存儲過程中的臨時數據或具有不同設計階段的數據。
 
2. **edb.def 文件**  - 包含定義電子數據庫中特定部分的設定信息。這類文件一般用於保存設計的定義參數，使得用戶能夠按照既定的規範重用或修改設計。
![2024-08-20_09-23-59](/assets/2024-08-20_09-23-59.png)

### 1.2 PyEDB 簡介

`pyedb` 是 ANSYS 提供的一個 Python API，用於 AEDT 的 EDB（Electronics DataBase）數據庫操作，讓工程師可以更靈活地進行電路設計和模擬。

以下是一些應用情境中的常見功能：
 
1. **參數化設計** ：使用 pyedb 可以輕鬆地進行設計參數化操作，例如自動修改 PCB 上的元件參數、佈局，並運行批量仿真以便找到最佳設計解決方案。
 
2. **設計數據的查詢和處理** ：通過 pyedb，可以查詢電路中的各種元件、網路和層的資料，並進行編程處理。這非常適合用於設計審查過程，例如快速定位某些元件或者校驗佈局的設計規則。
 
3. **自動化電磁分析準備** ：許多高頻電路和 PCB 設計需要進行電磁仿真分析，通過 pyedb，可以批量地對設計進行設置和調整，從而減少手動配置的工作量。例如，設置仿真邊界條件、端口或者頻段等，都可以自動化處理。
 
4. **與其他工具的整合** ：由於 Python 是一個非常靈活的編程語言，pyedb 可以與其他分析工具（例如 optiSLang、機器學習工具庫等）整合使用，使得可以根據仿真結果自動進行後續的設計調整，或進行更深入的數據分析。

### 1.3 PyAEDT 簡介
PyAEDT 是 Ansys 提供的 Python 庫，用於自動化 Ansys Electronics Desktop (AEDT) 的多個工具。它允許用戶在 Python 環境中操作和控制 AEDT，而無需打開圖形用戶界面，是進行電子設計仿真自動化和提高工作效率的利器。

PyAEDT 支持多個模塊，包括 HFSS、Circuit、Icepak 等。而其中 **Hfss3DLayout**  模塊是 PyAEDT 的重要部分，專門用於處理和模擬複雜的 PCB、封裝和其他高頻佈局結構。**Hfss3DLayout 的主要功能與應用：**  
1. **佈局設計的高效管理：** 
  - Hfss3DLayout 專門用於處理三維佈局設計。它允許用戶通過 PyAEDT 對 PCB 和封裝的結構進行操作，比如創建導體圖層、定義過孔、設置網絡等。

  - 用戶可以自動地進行設計佈局的修改，這在進行佈局設計優化和快速迭代時尤為重要。例如，在佈局中插入新的過孔、調整走線，這些操作都可以通過腳本完成。
 
2. **參數化仿真設置：** 
  - Hfss3DLayout 支持參數化設計，這意味著可以設定變量來代表佈局中的特定設計參數（如走線寬度、過孔直徑等），從而進行參數掃描和優化。

  - 例如，可以自動化地設置參數化走線的寬度，然後對其進行 S 參數仿真，以評估不同寬度對信號完整性的影響。
 
3. **電磁仿真自動化：** 
  - PyAEDT 可以讓用戶從頭開始設置 Hfss3DLayout 的仿真過程，包括設置仿真域、端口定義、邊界條件、頻率範圍等。

  - 通過 Python 腳本，可以批量執行多次仿真並擷取結果，這對於進行設計優化和敏感度分析非常有幫助。例如，可以自動化地為 PCB 中的不同信號線定義端口並進行 S 參數仿真。
 
4. **結果擷取與數據分析：** 
  - Hfss3DLayout 不僅可以進行電磁場模擬，還可以通過 PyAEDT 將仿真結果擷取出來，進行後續的數據處理。

  - 例如，可以自動化地擷取 S 參數，並使用 Python 的數據分析工具（如 Pandas、Matplotlib）進行可視化，這樣可以快速發現設計中可能的問題。
 
5. **與其他工具的無縫整合：** 
  - PyAEDT 提供的 Hfss3DLayout 還可以與 optiSLang 等工具整合，用於優化設計流程。例如，通過 optiSLang 進行全局優化和敏感度分析，可以顯著提升設計的性能。

  - 另外，Hfss3DLayout 可以與其他模擬工具（如 Icepak）聯動，進行跨物理場（如熱電耦合）分析，以提高產品的可靠性。

**應用案例：** 
例如，一個典型的應用是對高頻電路板（例如 RF PCB）的設計進行模擬。在這樣的場景下，通過 Hfss3DLayout 用戶可以：

- 自動化地創建板層結構並添加過孔和走線。

- 對關鍵信號通道設置端口，進行 S 參數仿真。

- 進行參數掃描來找到最佳的走線寬度、過孔大小，以確保信號完整性和低損耗。

- 最後，利用 Python 的分析工具快速處理仿真數據，生成報告。